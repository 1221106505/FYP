[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Cart SQL: SELECT c.cart_id, c.book_id, c.quantity, b.price, b.title, b.stock_quantity, b.pre_order_available
                 FROM cart c 
                 JOIN books b ON c.book_id = b.book_id 
                 WHERE c.cart_id IN (36,37,35) AND c.customer_id = ? with customer_id: 9
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Order SQL: INSERT INTO orders (
                    customer_id, 
                    total_amount, 
                    status, 
                    shipping_address, 
                    billing_address, 
                    contact_phone, 
                    contact_email, 
                    notes
                  ) VALUES (?, ?, 'pending', ?, ?, ?, ?, ?)
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Order created with ID: 38
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Item SQL for book 1: INSERT INTO order_items (order_id, book_id, quantity, unit_price, subtotal) 
                     VALUES (?, ?, ?, ?, ?)
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Update stock SQL for book 1: UPDATE books 
                       SET stock_quantity = stock_quantity - ?, 
                           updated_at = NOW()
                       WHERE book_id = ?
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Stock updated for book 1
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Item SQL for book 3: INSERT INTO order_items (order_id, book_id, quantity, unit_price, subtotal) 
                     VALUES (?, ?, ?, ?, ?)
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Update stock SQL for book 3: UPDATE books 
                       SET stock_quantity = stock_quantity - ?, 
                           updated_at = NOW()
                       WHERE book_id = ?
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Stock updated for book 3
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Item SQL for book 5: INSERT INTO order_items (order_id, book_id, quantity, unit_price, subtotal) 
                     VALUES (?, ?, ?, ?, ?)
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Update stock SQL for book 5: UPDATE books 
                       SET stock_quantity = stock_quantity - ?, 
                           updated_at = NOW()
                       WHERE book_id = ?
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Stock updated for book 5
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Delete cart SQL: DELETE FROM cart WHERE cart_id IN (36,37,35) AND customer_id = ?
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Cart items deleted
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Payment SQL: INSERT INTO payments (
                        order_id, 
                        customer_id, 
                        payment_method, 
                        payment_status, 
                        amount,
                        transaction_id,
                        payment_date,
                        created_at,
                        updated_at
                    ) VALUES (?, ?, ?, 'completed', ?, ?, NOW(), NOW(), NOW())
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Payment record created with ID: 42, transaction_id: TXN_38_1768450258_c49581
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Order status updated to confirmed
[15-Jan-2026 12:10:58 Asia/Kuala_Lumpur] Transaction committed successfully

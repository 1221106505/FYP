<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Cart - BookStore</title>
<link rel="stylesheet" href="../assets/cart/cart.css">
</head>
<body>

<header class="topbar">
  <div class="brand">
    <span class="logo">ðŸ“š</span>
    <span class="name">Virtual BookStore</span>
  </div>
  <nav class="nav">
  <a href="../Main.html">Home</a>
  <a href="../customer_view.html">Books</a>
  <a class="active" href="cart.html">Cart</a>
  <a href="../order_history.html">Order History</a>
  <a href="../profile.html">Profile</a>
</nav>
</header>

<main class="container">
  <section class="page-title">
    <h1>ðŸ›’ My Shopping Cart</h1>
    <p class="muted">Manage items, save for later, and checkout securely.</p>
  </section>

  <section class="grid">
    <!-- LEFT: CART LIST -->
    <div class="card">
      <div class="card-head">
        <label class="check">
          <input type="checkbox" id="selectAll" />
          <span>Select All</span>
        </label>

        <div class="actions">
          <button class="btn ghost" id="btnRemoveSelected" disabled>Remove Selected</button>
          <button class="btn ghost" id="btnClearCart">Clear Cart</button>
        </div>
      </div>

      <div id="cartState" class="state"></div>

      <div class="list" id="cartList"></div>

      <div class="divider"></div>

      <h3 class="section-title">Saved for later</h3>
      <div class="list" id="savedList"></div>
    </div>

    <!-- RIGHT: SUMMARY -->
    <aside class="card summary">
      <h2>Order Summary</h2>

      <div class="row">
        <span>Subtotal (<span id="itemsCount">0</span> items)</span>
        <strong>RM <span id="subtotal">0.00</span></strong>
      </div>

      <div class="row">
        <span>Shipping</span>
        <strong>RM <span id="shipping">5.00</span></strong>
      </div>

      <div class="row">
        <span>Tax (6%)</span>
        <strong>RM <span id="tax">0.00</span></strong>
      </div>

      <div class="row" id="discountRow" style="display:none;">
  <span>Discount</span>
  <strong>- RM <span id="discount">0.00</span></strong>
</div>

<div class="divider"></div>

<label class="field">
  <span class="label">Shipping Option</span>
  <select id="shippingOption">
  <option value="standard" selected>Standard (Peninsular) (RM 5.00) â€¢ 2â€“3 days</option>
  <option value="express">Express (Peninsular) (RM 12.00) â€¢ Next day</option>

  <option value="sabah">Sabah Delivery (RM 18.00) â€¢ 4â€“7 days</option>
  <option value="sarawak">Sarawak Delivery (RM 16.00) â€¢ 4â€“7 days</option>
</select>

</label>

<label class="field">
  <span class="label">Promo Code</span>
  <div style="display:flex; gap:8px;">
    <input id="promo" type="text" placeholder="e.g. SAVE10"
      style="flex:1; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
    <button class="btn" id="btnApplyPromo" type="button">Apply</button>
  </div>
  <span class="tiny muted" id="promoMsg"></span>
</label>

<p class="tiny muted" id="deliveryEstimate"></p>

<label class="field">
  <span class="label">Recipient Name</span>
  <input id="recipientName" type="text" placeholder="Full name (e.g. DK Palany)"
    style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
  <span class="tiny muted" id="recipientMsg"></span>
</label>

<div class="two-col">
  <label class="field">
    <span class="label">Postcode</span>
    <input id="postcode" type="text" inputmode="numeric" placeholder="e.g. 63000" maxlength="10"
      style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
    <span class="tiny muted" id="postcodeMsg"></span>
  </label>

  <label class="field">
    <span class="label">State</span>
    <input id="state" type="text" placeholder="e.g. Selangor"
      style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
    <span class="tiny muted" id="stateMsg"></span>
  </label>
</div>

<div class="two-col">
  <label class="field">
    <span class="label">City</span>
    <input id="city" type="text" placeholder="e.g. Cyberjaya"
      style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
    <span class="tiny muted" id="cityMsg"></span>
  </label>

  <label class="field">
    <span class="label">Area</span>
    <input id="area" type="text" placeholder="e.g. Tamarind Square"
      style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
    <span class="tiny muted" id="areaMsg"></span>
  </label>
</div>

<label class="field">
  <span class="label">Street / Address Line</span>
  <input id="street" type="text" placeholder="Street name, unit no, building"
    style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:14px;">
  <span class="tiny muted" id="streetMsg"></span>
</label>

      <div class="divider"></div>

      <div class="row total">
        <span>Total</span>
        <strong>RM <span id="grandTotal">0.00</span></strong>
      </div>

      <div class="divider"></div>

   <label class="field">
  <span class="label">Card Type</span>
  <select id="cardType">
    <option value="VISA" selected>VISA</option>
    <option value="MASTERCARD">MASTERCARD</option>
    <option value="CREDIT">CREDIT CARD</option>
    <option value="DEBIT">DEBIT CARD</option>
  </select>
  <span class="tiny muted" id="cardTypeMsg"></span>
</label>


      <!-- Secure Payment Details (Collapsible) -->
<div class="secure-box">
  <button class="secure-toggle" id="togglePayment" type="button" aria-expanded="false">
    <span>ðŸ”’ Secure Payment Details</span>
    <span id="toggleIcon">ï¼‹</span>
  </button>

  <div class="secure-body" id="paymentPanel" style="display:none;">
    <!-- CARD FIELDS -->
    <div class="pay-section" id="cardFields">
      <label class="field">
        <span class="label">Cardholder Name</span>
        <input id="cardName" type="text" placeholder="e.g. DK Palany" />
      </label>

      <label class="field">
        <span class="label">Card Number</span>
        <input id="cardNumber" type="text" inputmode="numeric" placeholder="1234 5678 9012 3456" maxlength="19" />
        <span class="tiny muted" id="cardNumberMsg"></span>
      </label>

      <div class="two-col">
        <label class="field">
          <span class="label">Expiry (MM/YY)</span>
          <input id="cardExpiry" type="text" inputmode="numeric" placeholder="MM/YY" maxlength="5" />
          <span class="tiny muted" id="cardExpiryMsg"></span>
        </label>

        <label class="field">
          <span class="label">CVV</span>
          <input id="cardCvv" type="password" inputmode="numeric" placeholder="***" maxlength="4" />
          <span class="tiny muted" id="cardCvvMsg"></span>
        </label>
      </div>

      <div class="hint">
        We do <strong>not</strong> store CVV. Card number is saved as <strong>masked</strong> (e.g., **** **** **** 1234).
      </div>
      <button class="btn" id="btnPayNow" type="button">Pay Now</button>
<p class="tiny muted" id="payMsg"></p>


      <p class="tiny muted" id="msg"></p>
    </aside>
  </section>
</main>

<!-- Payment Success Modal -->
<div id="successModal" class="pmodal" aria-hidden="true">
  <div class="pmodal-backdrop" onclick="closeSuccessModal()"></div>

  <div class="pmodal-card" role="dialog" aria-modal="true" aria-labelledby="pmTitle">
    <div class="pmodal-icon">
      <svg viewBox="0 0 52 52" class="check">
        <circle class="check-circle" cx="26" cy="26" r="25" fill="none"></circle>
        <path class="check-mark" fill="none" d="M14 27 L22 35 L38 18"></path>
      </svg>
    </div>

    <h3 id="pmTitle" class="pmodal-title">Payment Successful</h3>
    <p class="pmodal-sub" id="successModalText">Your order has been placed.</p>

    <div class="pmodal-chip">
      <span>Order ID</span>
      <strong id="successOrderId">â€”</strong>
      <button type="button" class="pmodal-copy" onclick="copyOrderId()">Copy</button>
    </div>

    <div class="pmodal-actions">
      <button type="button" class="btn ghost" onclick="goShop()">Continue Shopping</button>
      <button type="button" class="btn" onclick="goOrders()">View Order History</button>
    </div>

    <button type="button" class="pmodal-x" aria-label="Close" onclick="closeSuccessModal()">âœ•</button>
  </div>
</div>

<script src="../assets/cart/cart.js"></script>
</body>
</html>
